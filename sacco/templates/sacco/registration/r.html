{% extends "base.html" %}

{% block content %}

{% load static%}


{% load humanize %}

<!-- <body data-layout="horizontal" data-topbar="dark"> -->

<!-- Begin page -->
<div id="layout-wrapper">

    <!-- Header-->
    {% include "partials/als_header.html" %}

    <!-- ========== Left Sidebar Start ========== -->
    {% include "partials/als_left_sidebar.html" %}
    <!-- Left Sidebar End -->


    <!-- ============================================================== -->
    <!-- Start right Content here -->
    <!-- ============================================================== -->
    <div class="main-content">
        <div class="page-content">
            <div class="container-fluid">

            <!-- start page title -->
            {% include "partials/als_page_title.html" %}
            <!-- end page title -->

            {% include 'partials/als_messages.html' %} 

                
                
            {% include 'sacco/includes/search.html' %} 


                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                            {% include 'partials/als_table_title.html' %} 

                            

                                <table id="" class="table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%;">
                                    <thead>
                                    <tr>
                                    <th>Member</th>
                                    <th>Amount</th>
                                    <th class="t_id">Transaction ID</th>
                                    <th class="c_on">Created On</th>
                                    <th class="">Action</th>
                                    <th class="">Action</th>
                                    
                                    </tr>
                                    </thead>


                                    <tbody>
                                    {% for r in registration %}
                                    <tr>
                                    
                                    <td>{{ r.member.first_name }} {{ r.member.last_name }}</td>
                                    <td>{{ r.amount | intcomma }}</td>
                                    <td class="t_id1">{{ r.transaction_id}}</td>
                
                                    <td class="c_on1">{{ r.created_on }}</td>

                                    {% if request.path|slice:"1:" == 'account'%} 
                                    <td>
                                    <a href="{% url 'r4' r.id %}">
                                        <button type="button" class="btn btn-dark btn-rounded waves-effect waves-light  btn-sm">Reciept</button>
                                    </a>
                                    </td>
                                    {% elif request.path|slice:"1:" == 'savings/withdrawal/'%} 
                                    <td>
                                        <a href="{% url 'savings:withdrawal-reciept' r.id %}">
                                            <button type="button" class="btn btn-dark btn-rounded waves-effect waves-light  btn-sm">Reciept</button>
                                        </a>

                                    </td>

                                    {% elif request.path|slice:"1:" == 'capital-shares'%} 
                                    <td>
                                        <a href="{% url 'edit-capital-shares' r.id %}">
                                            <button type="button" class="btn btn-dark btn-rounded waves-effect waves-light  btn-sm">Edit</button>
                                        </a>

                                    </td>

                                    <td>
                                        <a href="{% url 'r2' r.id %}">
                                            <button type="button" class="btn btn-dark btn-rounded waves-effect waves-light  btn-sm">Reciept</button>
                                        </a>

                                    </td>

                                    {% elif request.path|slice:"1:" == 'shares'%} 
                                    <td>
                                        <a href="{% url 'edit-shares' r.id %}">
                                            <button type="button" class="btn btn-dark btn-rounded waves-effect waves-light  btn-sm">Edit</button>
                                        </a>

                                    </td>

                                    <td>
                                        <a href="{% url 'r5' r.id %}">
                                            <button type="button" class="btn btn-dark btn-rounded waves-effect waves-light  btn-sm">Reciept</button>
                                        </a>

                                    </td>


                                    {% elif request.path|slice:"1:" == 'passbook'%} 
                                    <td>
                                        <a href="{% url 'edit-passbook' r.id %}">
                                            <button type="button" class="btn btn-dark btn-rounded waves-effect waves-light  btn-sm">Edit</button>
                                        </a>

                                    </td>

                                    <td>
                                        <a href="{% url 'r8' r.id %}">
                                            <button type="button" class="btn btn-dark btn-rounded waves-effect waves-light  btn-sm">Reciept</button>
                                        </a>

                                    </td>

                                    {% elif request.path|slice:"1:" == 'nhif'%} 
                                    <td>
                                        <a href="{% url 'r3' r.id %}">
                                            <button type="button" class="btn btn-dark btn-rounded waves-effect waves-light  btn-sm">Reciept</button>
                                        </a>

                                    </td>
                                            
                                    {% endif %}
                                   

                                    
                                    
                                    </tr>    
                                    {% endfor %}                                       
                                    </tbody>

                                        <tr>
                                            <td>Total</td>
                                            <td>{{ total}}</td>
                                        </tr>

                                        <div style="margin-top: 10px;">
                                            <a href="#" class="btn btn-print" onclick="window.print();">Print</a>
                                         
                                        </div>

                                        <script>
                                            // Hide print and download buttons when printing or downloading
                                            window.onbeforeprint = function() {
                                                // Get the element with the current ID
    
                                                document.querySelector('.btn-print').style.display = 'none';
                                            
                                                document.querySelector('.search').style.display = 'none';
                                               
    
                                            }
                                    
                                           
                                    
                                    </script>
                                   
                                </table>

                    


                            </div>
                        </div>
                    </div> <!-- end col -->
                </div> 
            <!-- end row -->
            </div>
        </div>  
    </div>

</div>
<!-- END layout-wrapper -->


{% endblock %}